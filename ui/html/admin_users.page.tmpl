{{template "base" .}}

{{define "title"}}User Management{{end}}

{{define "main"}}
<div class="container">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2>User Management</h2>
        <span class="badge" style="background: #fcd116; color: #333; padding: 5px 12px; border-radius: 4px; font-weight: bold;">
            Admin Access
        </span>
    </div>

    <article>
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background-color: #f8f9fa; border-bottom: 2px solid #dee2e6; text-align: left;">
                    <th style="padding: 12px;">Email</th>
                    <th style="padding: 12px;">Role</th>
                    <th style="padding: 12px;">User ID</th>
                    <th style="padding: 12px; text-align: right;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {{range .Users}}
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 12px;"><strong>{{.Email}}</strong></td>
                    <td style="padding: 12px;">
                        <span style="padding: 4px 8px; border-radius: 4px; font-size: 0.85em;
                            {{if eq .Role "admin"}} background: #ffeeba; color: #856404;
                            {{else if eq .Role "seller"}} background: #d1ecf1; color: #0c5460;
                            {{else}} background: #e2e3e5; color: #383d41; {{end}}">
                            {{.Role}}
                        </span>
                    </td>
                    <td style="padding: 12px; font-family: monospace; font-size: 0.9em; color: #666;">{{.ID.Hex}}</td>
                    <td style="padding: 12px; text-align: right;">
                        {{if ne .Email $.UserName}}
                        <form action="/admin/users/delete" method="POST" style="display:inline;"
                              onsubmit="return confirm('Are you sure you want to delete this user? This action cannot be undone.');">
                            <input type="hidden" name="id" value="{{.ID.Hex}}">
                            <button type="submit" style="background-color: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer;">
                                Delete
                            </button>
                        </form>
                        {{else}}
                        <span style="font-size: 0.8em; color: #999; font-style: italic;">(You)</span>
                        {{end}}
                    </td>
                </tr>
                {{else}}
                <tr>
                    <td colspan="4" style="padding: 20px; text-align: center; color: #666;">No users registered in the system.</td>
                </tr>
                {{end}}
            </tbody>
        </table>
    </article>

    <div style="margin-top: 20px;">
        <a href="/admin/dashboard" class="btn-secondary" style="text-decoration: none; color: #666;">&larr; Back to Admin Dashboard</a>
    </div>
</div>
{{end}}